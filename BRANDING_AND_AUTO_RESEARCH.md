# Branding and Auto-Research Implementation

## Changes Implemented

### 1. ✅ Export Branding (All Formats)

Added professional Unbuilt branding to all export formats with the ability to customize or disable for Pro users.

#### PDF Exports (Page-Specific & Multi-Result)

**Header Branding:**
- Unbuilt logo (40px height) at top left
- "unbuilt.one" URL at top right
- Clean border separator

**Footer Branding:**
- Unbuilt logo (30px height) at bottom left
- "Generated by Unbuilt" text
- "unbuilt.one - AI-Powered Market Gap Analysis" tagline
- Company name and date at bottom right
- Confidentiality notice

**Visual Design:**
```
┌─────────────────────────────────────────┐
│ [Logo]              unbuilt.one         │
├─────────────────────────────────────────┤
│                                         │
│         Report Content Here             │
│                                         │
├─────────────────────────────────────────┤
│ [Logo] Generated by Unbuilt    Date    │
│        unbuilt.one              Company │
└─────────────────────────────────────────┘
```

#### Excel/CSV Exports

**Header Section:**
```csv
"Generated by Unbuilt - unbuilt.one"
"AI-Powered Market Gap Analysis"
"Report Date: January 20, 2025"

Title,Description,Category,...
```

#### PowerPoint Exports

**Title Slide:**
- Unbuilt logo (80px) at top center
- Report title and company info
- "Powered by Unbuilt - unbuilt.one" at bottom

**Content Slides:**
- Footer: "Powered by Unbuilt (unbuilt.one) | Slide X | Confidential"

#### JSON Exports

**Metadata:**
```json
{
  "generatedBy": "Unbuilt",
  "platform": "unbuilt.one",
  "description": "AI-Powered Market Gap Analysis",
  "exportDate": "2025-01-20T...",
  "totalResults": 1,
  "results": [...]
}
```

---

### 2. ✅ Branding Control

**Default Behavior:**
- Branding is **enabled by default** for all users
- Shows Unbuilt logo, URL, and attribution

**Customization Options:**
```typescript
options: {
  customization: {
    showBranding: false,  // Disable branding (Pro feature)
    companyName: "Your Company",
    authorName: "Research Team"
  }
}
```

**Pro User Benefits:**
- Can disable Unbuilt branding
- Add custom company branding
- White-label exports
- Custom author attribution

**Implementation:**
```typescript
const showBranding = options.customization?.showBranding !== false;

// In HTML
${showBranding ? `
  <div class="branding-header">
    <img src="https://unbuilt.one/assets/logo.gif" alt="Unbuilt Logo" />
    <div class="url">unbuilt.one</div>
  </div>
` : ''}
```

---

### 3. ✅ Auto-Start Market Research

**Previous Flow:**
1. Click "Start Market Research" in Research tab
2. Navigate to market research page
3. Form pre-filled with opportunity data
4. **User clicks "Conduct Research" button** ← Extra step
5. Research starts

**New Flow:**
1. Click "Start Market Research" in Research tab
2. Navigate to market research page
3. Form pre-filled with opportunity data
4. **Research automatically starts** ← Seamless!
5. Results appear

**Implementation:**
```typescript
React.useEffect(() => {
  const contextData = sessionStorage.getItem('marketResearchContext');
  if (contextData) {
    const context = JSON.parse(contextData);
    const query = context.title || context.description;
    setSearchQuery(query);
    
    // Determine industry
    const selectedIndustry = mapCategoryToIndustry(context.category);
    setIndustry(selectedIndustry);
    
    // Clear context
    sessionStorage.removeItem('marketResearchContext');
    
    // AUTO-START RESEARCH
    if (query.trim()) {
      setIsLoading(true);
      apiRequest("POST", "/api/market-research", {
        query: `${query} in ${selectedIndustry} industry...`
      })
        .then(response => response.json())
        .then(data => {
          setMarketData(parseMarketResearch(data));
        })
        .finally(() => setIsLoading(false));
    }
  }
}, []);
```

**User Experience:**
- Click "Start Market Research" → Instant research begins
- Loading indicator shows progress
- Results appear automatically
- No extra clicks needed
- Seamless workflow

---

## Technical Details

### Files Modified

1. **server/routes/export.ts**
   - Added `showBranding` parameter to all export functions
   - Updated `generatePageSpecificHTML` with header/footer branding
   - Added branding to CSV, Excel, JSON, PowerPoint exports
   - Made branding optional via `options.customization.showBranding`

2. **client/src/pages/market-research.tsx**
   - Enhanced `useEffect` to auto-start research
   - Added API call within the effect
   - Proper error handling and loading states
   - Context cleanup before research starts

### Logo Implementation

**Logo Source:**
- URL: `https://unbuilt.one/assets/logo.gif`
- Fallback: Local file at `attached_assets/logo.gif`
- Format: Animated GIF (works in PDFs via Puppeteer)

**Sizing:**
- Header: 40px height
- Footer: 30px height
- PowerPoint title: 80px height
- Maintains aspect ratio

### Branding Styles

**Colors:**
- Primary: `#7c3aed` (Purple)
- Secondary: `#ec4899` (Pink)
- Text: `#1f2937` (Dark gray)
- Muted: `#6b7280` (Medium gray)

**Typography:**
- Font: Segoe UI, Tahoma, Geneva, Verdana, sans-serif
- Header: 32px bold
- Footer: 12px regular
- URL: 14px semi-bold

---

## Future Enhancements

### Pro User Profile Settings

Add to user profile page:
```typescript
interface BrandingSettings {
  showUnbuiltBranding: boolean;
  customLogo?: string;  // Upload custom logo
  companyName: string;
  tagline?: string;
  primaryColor?: string;
  secondaryColor?: string;
}
```

**Features:**
- Upload custom logo
- Set company colors
- Custom tagline
- White-label option
- Preview before export

### Export Customization UI

Add modal before export:
```
┌─────────────────────────────────┐
│  Export Customization           │
├─────────────────────────────────┤
│  ☑ Include Unbuilt branding     │
│  ☐ Use custom branding          │
│                                 │
│  Company: [Your Company    ]    │
│  Author:  [Research Team   ]    │
│                                 │
│  [Preview] [Export]             │
└─────────────────────────────────┘
```

### Analytics

Track branding preferences:
- % of users keeping Unbuilt branding
- % of Pro users using custom branding
- Most popular export formats
- Branding impact on sharing

---

## Testing Checklist

- [x] PDF exports show header branding
- [x] PDF exports show footer branding
- [x] Excel/CSV exports have branding header
- [x] PowerPoint exports have logo on title slide
- [x] JSON exports include metadata
- [x] Branding can be disabled with `showBranding: false`
- [x] Market research auto-starts from action plan
- [x] Loading indicator shows during auto-research
- [x] Form is pre-filled before research starts
- [x] Context is cleared after use
- [x] Build succeeds without errors

---

## User Benefits

### Free Users
- Professional-looking exports with Unbuilt branding
- Credibility through association with Unbuilt platform
- No setup required - works out of the box

### Pro Users
- Option to remove Unbuilt branding
- Add custom company branding
- White-label exports for clients
- Professional customization options

### All Users
- Seamless market research workflow
- One-click research from opportunities
- No repetitive form filling
- Faster insights and analysis

---

## Brand Consistency

All exports now maintain consistent branding:
- Same logo across all formats
- Consistent color scheme (purple/pink gradient)
- Professional typography
- Clear attribution and URL
- Confidentiality notices

This creates a cohesive brand experience and makes Unbuilt exports instantly recognizable.
